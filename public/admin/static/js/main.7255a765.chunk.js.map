{"version":3,"sources":["../delegated 170 from dll-reference main_library","../delegated 83 from dll-reference main_library","../delegated 230 from dll-reference main_library","../delegated 228 from dll-reference main_library","assets/images/default_teacher_avatar.png","layouts/Base/hooks.ts","tools/hoc/ts-enhance.ts","tools/hoc/index.ts","../delegated 84 from dll-reference main_library","../delegated 425 from dll-reference main_library","storage/token.ts","auth/token.ts","config/index.ts","routes/suspense.tsx","components/MyHeader/MenuItem.tsx","components/MyHeader/UserAvatar.tsx","components/MyHeader/index.tsx","tools/index.ts","components/MyFooter/index.tsx","layouts/Base/Breadcrumbs.tsx","layouts/Base/index.tsx","auth/page.ts","auth/map.ts","routes/pages/classroom.tsx","routes/pages/coach.tsx","routes/pages/exam.tsx","routes/pages/guide.tsx","routes/pages/questions.tsx","routes/pages/resource.tsx","routes/pages/statistics.tsx","routes/pages/textbook.tsx","routes/pages/wizard.tsx","routes/pages/work.tsx","routes/pages/wrong.tsx","routes/pages/settings.tsx","routes/routes.tsx","routes/index.ts","routes/middleware/auth.tsx","tools/hooks/async.ts","components/ErrorBoundary/index.tsx","App.tsx","main.tsx","tools/instance.ts","constants/app.ts","constants/user.ts","constants/pages.ts","constants/index.ts","../external \"main_library\"","auth/authority.ts","storage/base.ts","store/base-layout/index.ts","services/type.ts","services/code.ts","services/base.ts","services/user/index.ts","storage/term.ts","storage/role.ts","store/auth/index.ts","../delegated 427 from dll-reference main_library","assets/images/logo.png"],"names":["module","exports","__webpack_require__","useBreadcrumbs","initBreadcrumbs","store","BaseLayoutStore","useStore","setBreadcrumbs","breadcrumbs","setBreadcrumbsAction","name","routeName","concat","Object","E_playground_goPlayground_echo_shop_fe_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","useEffect","state","NAV_MAX_LEN","useNavs","navs","moreNavs","defaultName","subNav","routeInfos","AWRouter","instance","findMap","PAGE_NAMES","map","t","forEach","r","info","meta","strict","isUndefined","authUnstrict","Authority","checkAll","auth","length","push","route","withDefaultProps","defaultProps","Cmp","d","__webpack_exports__","TokenStorage","classCallCheck","this","storage","key","TOKEN_KEY","tokenStore","createStorage","hasMeta","session","prefix","_instance","token","cookie","getCookie","set","setString","tokenFromLocal","get","getString","remove","window","__TokenStorage__","clean","config","beforeCallback","afterCallback","triggerGlobalCallback","logoutCallback","reloadPage","location","href","pushByName","replace","isDev","AUTH_API_ROOT","LOCALSTROAGE_PREFIX","DISABLED_EXPIRE","PATCH_CALLBACK_ROUTE_MIDDLEWARE","MAIN_CONFIG","console","error","ENV_DEVELOPMENT","process","API_ROOT","WORK_API_ROOT","QUESTION_API_ROOT","COACH_API_ROOT","OFFICE_API_ROOT","GUIDE_API_ROOT","RESOURCE_API_ROOT","DICTIONARY_API_ROOT","ADMIN_URL","RECORDING_PLATFORM","Cookies","log","PATCH_CALLBACK","WK_STORAGE_EXPIRE","DISABLED_CHAPTER_TREE_CACHE","DISABLED_KNOW_TREE_CACHE","params","apiConfigArr","otherConfigArr","every","i","createSuspense","defaultDelay","defaultLoading","reactfrom_dll_reference_main_library_default","a","createElement","className","menus","nav","subNavs","menu_default","n","Item","aw_react_router_lib","to","fullPath","hanName","MenuItem","_ref","classnames","active","filter","Boolean","join","hasSubNav","dropdown_default","overlayClassName","overlay","icon_default","type","UserAvatar","AuthStore","user","settingsPath","getPathByName","onClick","logoutAction","src","defaultAvatar","alt","isActiveNav","currentRoute","getCurrentState","topNavName","targetObj","keyString","defaultValue","result","String","split","reduce","preObj","curPath","safeGet","canGoRoot","withRouter","history","row_default","col_default","span","title","homeRoute","find","logoImg","style","cursor","width","components_MyHeader_MenuItem","components_MyHeader_UserAvatar","year","Date","getFullYear","MyFooter","rel","target","memo","defaultHandler","useCallback","b","handler","breadcrumb_default","separator","BaseLayout","routerView","src_components_MyHeader","Base_Breadcrumbs","src_components_MyFooter","displayName","withStoreProviders","CLASSROOM_AUTH","COACH_AUTH","EXAM_AUTH","GUIDE_AUTH","QUESTIONS_AUTH","RESOURCE_AUTH","STATISTICS_AUTH","TEXTBOOK_AUTH","WIZARD_AUTH","WORK_AUTH","WRONG_AUTH","routes","path","component","children","default","props","suspense","assign","load","e","then","bind","Promise","all","toConsumableArray","classroomRoutes","coachRoutes","examRoutes","guideRoutes","questionsRoutes","resourceRoutes","statisticsRoutes","textbookRoutes","wizardRoutes","workRoutes","wrongRoutes","settingsRoutes","checkList","whiteList","awRouter","mode","notFoundRouteName","middlewares","routeTitle","document","indexOf","Token","isLogin","auths","ActionType","renderRootRoute","ErrorBoundary","_this","possibleConstructorReturn","getPrototypeOf","call","hasError","errorInfo","setState","_this$props","ErrorComponent","React","Component","promiseReducer","action","START","objectSpread","initial","pending","errorMessage","FINISH","HAS_ERROR","payload","startActionCreator","finishActionCreator","hasErrorActionCreator","arguments","undefined","useRequest","func","initialState","_ref3","delay","checkError","pr","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","run","asyncToGenerator","regenerator_default","mark","_callee","resp","wrap","_context","prev","next","PminDelay","sent","abrupt","t0","warn","stop","useMemo","usePromise","status","message","data","_useRequest","getUserInfoAction","components_ErrorBoundary","render","ReactDOM","src_App","getElementById","APP_ROOT_ID","onerror","event","source","fileno","columnNumber","error_data","getElementsByTagName","innerText","error_event","script_url","line_number","column_number","error_detail","error_stack","stack","user_agent","navigator","userAgent","location_href","event_string","message_default","warning","FastClick","attach","body","addEventListener","ev","val","newValue","localStorage","clear","sessionStorage","USER_TYPE","ROLE_TYPE","ROLE_STATUS","main_library","_ref$mock","mock","E_playground_goPlayground_echo_shop_fe_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","loaded","authStore","opt","authArr","authMap","hasOwnProperty","item","Error","check","some","__Authority__","aw_easy_storage__WEBPACK_IMPORTED_MODULE_0__","aw_easy_storage__WEBPACK_IMPORTED_MODULE_0___default","_config__WEBPACK_IMPORTED_MODULE_1__","AWStorageFactory","_ref$enableLog","enableLog","_ref$disabled","disabled","_ref$prefix","_ref$session","_ref$hasMeta","_ref$expire","expire","NO_VALIDATE_EXPIRE","_ref$checkExpire","checkExpire","AWStorage","react_hanger__WEBPACK_IMPORTED_MODULE_0__","aw_react_store__WEBPACK_IMPORTED_MODULE_1__","createStore","useSetState","JSON_CONTENT_TYPE","Content-Type","OTHER_ERROR_CODES","axios","Axios","create","headers","interceptors","request","use","json","qs","stringify","reject","response","Services","msg","showErrorMessage","statusCode","Number","code","logout","errorResponseData","responseData","method","__Services__","api","username","password","url","authAPI","_data","termid","termname","yearname","TermStorage","getNumber","id","setNumber","__TermStorage__","RoleStorage","roleStore","jsonString","JSON","parse","roleid","roletype","roleData","err","role","__RoleStorage__","terms","currentTerm","currentRole","setUserToState","userEntity","termVos","loadMap","acl","_callee3","defaultTermID","localTermID","localTerm","defaultTerm","term","_context3","setCurrentTermAction","UserServices","getDetaultTerm","setCurrentRoleAction","aclrole","loginAction","login","trim","_x3","_x4","apply","_callee2","force","_args2","_context2","getUserInfo","setDefaultTerm","setRole","roles","localRole","defaultRole","activestatus","IS","firstRole","setDefaultRole","authGetter","termsGetter","isTeacherGetter","category","TEACHER","rolesGetter"],"mappings":"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","file":"static/js/main.7255a765.chunk.js","sourcesContent":["module.exports = (__webpack_require__(39))(170);","module.exports = (__webpack_require__(39))(83);","module.exports = (__webpack_require__(39))(230);","module.exports = (__webpack_require__(39))(228);","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpERThDMTlBREREQTgxMUU4QjcwMTlGQ0VFNzg4MzlGMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpERThDMTlBRUREQTgxMUU4QjcwMTlGQ0VFNzg4MzlGMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkRFOEMxOUFCRERBODExRThCNzAxOUZDRUU3ODgzOUYyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRFOEMxOUFDRERBODExRThCNzAxOUZDRUU3ODgzOUYyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AE41zAAAFI5JREFUeNrsXQmYFNW1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\"","import { useEffect } from 'react';\n\nimport AWRouter, { AWRouteInfo } from 'aw-react-router';\nimport BaseLayoutStore, { BreadcrumbsType } from '@/store/base-layout';\nimport Authority from '@/auth/authority';\nimport { RouteMeta } from '@/routes/type';\nimport { isUndefined } from '@/tools/instance';\nimport { PAGE_NAMES } from '@/constants';\nimport { Nav } from '@/components/MyHeader/type';\n\n/** 修改面包屑 */\nexport function useBreadcrumbs(initBreadcrumbs: BreadcrumbsType[]) {\n  const store = BaseLayoutStore.useStore();\n\n  const setBreadcrumbs = (breadcrumbs: BreadcrumbsType[]) => {\n    store.setBreadcrumbsAction([\n      {\n        name: '首页',\n        routeName: 'home',\n      },\n      ...breadcrumbs,\n    ]);\n  };\n\n  useEffect(() => {\n    setBreadcrumbs(initBreadcrumbs);\n  }, []);\n\n  return {\n    breadcrumbs: store.state.breadcrumbs,\n    setBreadcrumbs,\n  };\n}\n\n\nconst NAV_MAX_LEN = 8; // 最后一个为 \"更多\"\n/** 创建页面导航 */\nexport function useNavs(): Nav[] {\n  const navs: Nav[] = [];\n  const moreNavs: Nav = {\n    defaultName: '更多',\n    subNav: [],\n  };\n  const routeInfos = AWRouter.instance().findMap(PAGE_NAMES.map(t => t.name));\n\n  PAGE_NAMES.forEach((r) => {\n    const name = r.name;\n    const info: AWRouteInfo<RouteMeta> = routeInfos[name];\n    if (!info) { return; }\n    const meta = info.meta || {};\n    const strict = isUndefined(meta.authUnstrict) ? true : !meta.authUnstrict;;\n\n    if (Authority.checkAll(meta.auth || [], strict)) {\n      if (navs.length >= (NAV_MAX_LEN - 1)) {\n        moreNavs.subNav!.push({ route: routeInfos[name] });\n        return;\n      }\n      navs.push({ route: routeInfos[name] });\n    }\n  });\n\n  if (moreNavs.subNav!.length > 1) {\n    return [...navs, moreNavs];\n  } else if (moreNavs.subNav!.length === 1) {\n    return [...navs, moreNavs.subNav![0]];\n  }\n\n  return navs;\n}\n","// ts react 的一些推断辅助\r\nimport { ComponentType } from \"react\";\r\n\r\ntype Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;\r\n\r\n/**\r\n * typescript defaultProps 的默认 props 辅助 hoc\r\n */\r\nexport const withDefaultProps = <P extends object, DP extends Partial<P> = Partial<P>>(\r\n  defaultProps: DP,\r\n  Cmp: ComponentType<P>,\r\n) => {\r\n  type RequiredProp = Omit<P, keyof DP>;\r\n  type Props = Partial<DP> & Required<RequiredProp>;\r\n\r\n  Cmp.defaultProps = defaultProps;\r\n\r\n  return (Cmp as ComponentType<any>) as ComponentType<Props>;\r\n};\r\n","export * from './ts-enhance';\r\n","module.exports = (__webpack_require__(39))(84);","module.exports = (__webpack_require__(39))(425);","/** token */\nimport AWStorage from 'aw-easy-storage';\nimport createStorage from '@/storage/base';\nimport { TOKEN_KEY, getCookie } from '@/config';\n\n// 浏览器退出时清除 token\nclass TokenStorage {\n\n  private static _instance: TokenStorage | null = null;\n  private storage: AWStorage;\n\n  public static instance(): TokenStorage {\n    if (this._instance === null) {\n      this._instance = new this();\n    }\n\n    return this._instance!;\n  }\n\n  constructor() {\n    this.storage = createStorage({\n      hasMeta: false,\n      session: true,\n      prefix: '',\n    });\n  }\n\n  public readonly key = TOKEN_KEY;\n  private tokenStore: null | string = null; // 内存缓存\n\n  public set(token: string) {\n    const cookie = getCookie();\n\n    if (cookie) {\n      cookie.set(this.key, token);\n    }\n    this.storage.setString(this.key, token);\n\n    this.tokenStore = token;\n  }\n\n  /** 取值优先级 (内存 > cookie > sessionStorage) */\n  public get(): string {\n    if (this.tokenStore) {\n      return this.tokenStore;\n    }\n    const cookie = getCookie();\n\n    // cookie 有则读 cookie，否则读 sessionStorage，然后同步到 cookie\n    let tokenFromLocal = '';\n    if (cookie) { tokenFromLocal = cookie.get(this.key); }\n    if (!tokenFromLocal) {\n      tokenFromLocal = this.storage.getString(this.key) || '';\n      if (cookie) { cookie.set(this.key, tokenFromLocal); }\n    }\n\n    this.tokenStore = tokenFromLocal;\n    return this.tokenStore || '';\n  }\n\n  public clean() {\n    const cookie = getCookie();\n\n    if (cookie) { cookie.remove(this.key); }\n\n    this.storage.remove(this.key);\n    this.tokenStore = null;\n  }\n\n}\n\nexport default TokenStorage.instance();\n\n(window as any).__TokenStorage__ = TokenStorage.instance();\n","// 登出、获取用户 token 操作\nimport TokenStorage from '@/storage/token';\nimport AWRouter from 'aw-react-router';\n\ninterface LogoutConfig {\n  beforeCallback?: (token: string) => Promise<boolean> // 当前退出行为前的 callback\n  afterCallback?: () => Promise<boolean>               //当前退出行为后的 callback\n  triggerGlobalCallback?: boolean                      // 触发全局的 logout callback\n  reloadPage?: boolean                                 // 是否要刷新页面\n}\n\nexport default class {\n\n  public static readonly key = TokenStorage.key;\n  // main.ts 中挂载的回调 (将不方便在这个类中做的事情放到 main.ts 中去做)\n  public static logoutCallback: null | (() => void) = null;\n\n  public static set(token: string) {\n    TokenStorage.set(token);\n  }\n\n  public static get(): string {\n    return TokenStorage.get();\n  }\n\n  public static isLogin(): boolean {\n    return !!this.get();\n  }\n\n  public static clean() {\n    TokenStorage.clean();\n  }\n\n  /**\n   * 登出操作\n   */\n  public static async logout(config: LogoutConfig) {\n    if (config.beforeCallback) {\n      const status = await config.beforeCallback(this.get());\n      if (!status) {\n        return;\n      }\n    }\n\n    this.clean();\n\n    if (config.afterCallback) {\n      const status = await config.afterCallback();\n      if (!status) {\n        return;\n      }\n    }\n\n    // 触发全局的 callback\n    if (config.triggerGlobalCallback && this.logoutCallback) {\n      await this.logoutCallback();\n    }\n\n    if (config.reloadPage) {\n      window.location.href = '/';\n    } else {\n      AWRouter.instance().pushByName('login', {\n        replace: true,\n      });\n    }\n  }\n\n}\n","const W: any = window;\r\nconst MAIN_CONFIG: { [key: string]: any } = W.MAIN_CONFIG;\r\nif (!MAIN_CONFIG) { console.error('配置文件 MAIN_CONFIG.js 不存在，请检查!'); }\r\n\r\n// ---------------------------- 开发环境判断 ----------------------------\r\nconst ENV_DEVELOPMENT = 'development';\r\n// const ENV_PRODUCTION = 'production';\r\n\r\n/** 是否为 development 环境 */\r\nexport function isDev() {\r\n  return process.env.NODE_ENV === ENV_DEVELOPMENT;\r\n}\r\n\r\n// ---------------------------- 项目配置相关 ----------------------------\r\n/** PUBLIC_URL */\r\nexport const PUBLIC_URL = process.env.PUBLIC_URL;\r\n\r\n// ---------------------------- 接口根地址 ----------------------------\r\nexport const API_ROOT: string = MAIN_CONFIG.API_ROOT;\r\nexport const AUTH_API_ROOT: string = MAIN_CONFIG.AUTH_API_ROOT;\r\nexport const WORK_API_ROOT: string = MAIN_CONFIG.WORK_API_ROOT;\r\nexport const QUESTION_API_ROOT: string = MAIN_CONFIG.QUESTION_API_ROOT;\r\nexport const COACH_API_ROOT: string = MAIN_CONFIG.COACH_API_ROOT;\r\nexport const OFFICE_API_ROOT: string = MAIN_CONFIG.OFFICE_API_ROOT;\r\nexport const GUIDE_API_ROOT: string = MAIN_CONFIG.GUIDE_API_ROOT;\r\nexport const RESOURCE_API_ROOT: string = MAIN_CONFIG.RESOURCE_API_ROOT;\r\nexport const DICTIONARY_API_ROOT: string = MAIN_CONFIG.DICTIONARY_API_ROOT;\r\n\r\n// ---------------------------- page url ----------------------------\r\nexport const ADMIN_URL: string = MAIN_CONFIG.ADMIN_URL; // 管理后台地址\r\nexport const RECORDING_PLATFORM: string = MAIN_CONFIG.RECORDING_PLATFORM; // 录播平台登录页面\r\n\r\n// ---------------------------- ewebeditor config ----------------------------\r\nexport const EWEBEDITOR_URL = '/ewebeditor/ewebeditor.htm';\r\nexport const EWEBEDITOR_STYLE = 'expand600';\r\nexport const EWEBEDITOR_SKIN = 'flat10';\r\nexport function create_ewebeditor_src(editor_key: string) {\r\n  return `${EWEBEDITOR_URL}?id=content${editor_key}&style=${EWEBEDITOR_STYLE}&skin=${EWEBEDITOR_SKIN}`;\r\n}\r\n\r\n// ---------------------------- key ----------------------------\r\nexport const LOCALSTROAGE_PREFIX: string= MAIN_CONFIG.LOCALSTROAGE_PREFIX; // localstroage prefix\r\nexport const TOKEN_KEY: string = MAIN_CONFIG.TOKEN_KEY; // token key\r\n\r\n// ---------------------------- cookie ----------------------------\r\ninterface CookiesType {\r\n  set(key: string, val: string, attr?: { [key: string]: any }): string | void;\r\n  get(key: string, json?: boolean): any;\r\n  remove(key: string, attr?: { [key: string]: any }): void;\r\n}\r\n\r\nconst Cookies: CookiesType = (window as any).Cookies;\r\nexport function getCookie() {\r\n  if (!Cookies) {\r\n    console.log('js-cookie.js 未加载');\r\n    return null;\r\n  }\r\n  return Cookies;\r\n}\r\n\r\n// ---------------------------- cache config ----------------------------\r\nexport const DISABLED_EXPIRE = 666666; // 不设置缓存\r\nexport const WK_STORAGE_EXPIRE = MAIN_CONFIG.WK_STORAGE_EXPIRE || DISABLED_EXPIRE;\r\nexport const DISABLED_CHAPTER_TREE_CACHE = MAIN_CONFIG.DISABLED_CHAPTER_TREE_CACHE || false;\r\nexport const DISABLED_KNOW_TREE_CACHE = MAIN_CONFIG.DISABLED_KNOW_TREE_CACHE || false;\r\n\r\n// ---------------------------- 其他 ----------------------------\r\n// 补丁函数\r\ntype PatchCallbackType = (params: any) => void;\r\nexport const PATCH_CALLBACK: PatchCallbackType | null = MAIN_CONFIG.PATCH_CALLBACK || null;\r\nexport const PATCH_CALLBACK_ROUTE_MIDDLEWARE = (params: any) => {\r\n  if (PATCH_CALLBACK) {\r\n    PATCH_CALLBACK(params);\r\n  }\r\n  return null;\r\n}\r\n\r\n// ---------------------------- 必有配置的加载检查 ----------------------------\r\nconst apiConfigArr = [API_ROOT, AUTH_API_ROOT, WORK_API_ROOT, QUESTION_API_ROOT, COACH_API_ROOT, OFFICE_API_ROOT, GUIDE_API_ROOT, RESOURCE_API_ROOT, DICTIONARY_API_ROOT, ADMIN_URL];\r\nconst otherConfigArr = [LOCALSTROAGE_PREFIX, TOKEN_KEY];\r\nif (!apiConfigArr.every((i) => !!i)) {\r\n  console.error('【MAIN_CONFIG】 API PREFIX 加载错误，请检查配置文件', apiConfigArr);\r\n}\r\nif (!otherConfigArr.every((i) => !!i)) {\r\n  console.error('【MAIN_CONFIG】 OTHER CONFIG 加载错误，请检查配置文件', otherConfigArr);\r\n}\r\n","import React from 'react';\nimport { createSuspense } from 'aw-react-router';\n\nexport default createSuspense({\n  defaultDelay: 0,\n  defaultLoading: <div className=\"common_page_placeholder\">loading ... ...</div>\n});\n","import React, { FC } from 'react';\nimport { Link } from 'aw-react-router';\nimport {\n  Dropdown,\n  Menu,\n  Icon,\n} from 'antd';\n\nimport './MenuItem.less';\nimport { Nav } from './type';\n\nimport './UserAvatar.less';\n\ninterface Props {\n  active: boolean\n  nav: Nav\n}\n\nconst menus = (nav: Nav): JSX.Element => {\n  const subNavs = nav.subNav || [];\n\n  return (\n    <Menu>\n      {\n        subNavs.map((n, i) => {\n          return (\n            <Menu.Item key={i}>\n              <Link to={n.route!.fullPath}>{n.route!.meta.hanName}</Link>\n            </Menu.Item>\n          );\n        })\n      }\n    </Menu>\n  );\n}\n\nconst MenuItem: FC<Props> = ({ nav, active }) => {\n  const classnames = [\n    'menu_item_component',\n    active ? 'active' : '',\n  ].filter(Boolean).join(' ');\n  const hasSubNav = nav.subNav && nav.subNav.length > 0 && nav.defaultName;\n\n  return (\n    <div className={classnames}>\n      {\n        hasSubNav\n          ? <Dropdown overlayClassName=\"header_menu_item_content\" overlay={menus(nav)}>\n              <div>{nav.defaultName} <Icon type=\"down\" /></div>\n            </Dropdown>\n          : <Link to={nav.route!.fullPath}>{nav.route!.meta.hanName}</Link>\n      }\n    </div>\n  );\n};\n\nexport default MenuItem;\n","import React, { FC } from 'react';\nimport {\n  Dropdown,\n  Menu,\n} from 'antd';\nimport { Link } from 'aw-react-router';\n\nimport defaultAvatar from '@/assets/images/default_teacher_avatar.png';\nimport AuthStore from '@/store/auth';\nimport AWRouter from 'aw-react-router';\n\nconst UserAvatar: FC = () => {\n  const store = AuthStore.useStore();\n  const user = store.state.user!;\n  const settingsPath = AWRouter.instance().getPathByName('settings');\n\n  const menus = (\n    <Menu>\n      <Menu.Item>\n        <Link to={settingsPath}>个人中心</Link>\n      </Menu.Item>\n      <Menu.Item>\n        <p onClick={store.logoutAction}>退出</p>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Dropdown overlay={menus}>\n      <div className=\"user_avatar_component\">\n        <div className=\"user_avatar\">\n          <img src={user.fullPath || defaultAvatar} alt=\"avatar\" />\n        </div>\n      </div>\n    </Dropdown>\n  );\n};\n\nexport default UserAvatar;\n","import React, { FC } from 'react';\nimport { Row, Col } from 'antd';\n\nimport { withDefaultProps } from '@/tools/hoc';\nimport AWRouter, { AWRouteState, withRouter, RouteComponentProps } from 'aw-react-router';\nimport { RouteMeta } from '@/routes/type';\nimport { Nav } from './type';\nimport { safeGet } from '@/tools';\n\nimport logoImg from '@/assets/images/logo.png';\nimport MenuItem from './MenuItem';\nimport UserAvatar from './UserAvatar';\n\nimport './index.less';\n\n\ninterface DefaultProps {\n  canGoRoot: boolean\n  navs: Nav[]\n}\n\nconst defaultProps: DefaultProps = {\n  canGoRoot: true,\n  navs: [],\n}\n\nfunction isActiveNav(nav: Nav): boolean {\n  const currentRoute: AWRouteState<RouteMeta> | null = AWRouter.instance().getCurrentState();\n  if (!currentRoute) { return false; }\n  const meta = currentRoute.meta;\n  if (!meta) { return false; }\n\n  return meta.topNavName === safeGet(nav, 'route.meta.topNavName', '');\n}\n\nconst MyHeader: FC<DefaultProps & RouteComponentProps> = ({ navs, canGoRoot, history }) => {\n  /** 回到首页 */\n  const gotoRootPage = () => {\n    const homeRoute = AWRouter.instance().find('home');\n    history.push(homeRoute ? homeRoute.fullPath : '/');\n  };\n\n  return (\n    <div className=\"my_header_component\">\n      <Row className=\"menu_inner\">\n\n        {/* logo */}\n        <Col span={3}>\n          {\n            canGoRoot\n            ? <div className=\"menu_logo\" title=\"点击回到首页\" onClick={gotoRootPage}>\n                <img alt=\"logo\" src={logoImg} />\n                <span className=\"logo_title\">首页</span>\n              </div>\n            : <div className=\"menu_logo\" style={{cursor: 'pointer'}}>\n                <img alt=\"logo\" src={logoImg} />\n              </div>\n          }\n\n        </Col>\n\n        {/* menu */}\n        <Col span={19}>\n          {\n            navs.map((n, i) => {\n              return (\n                <div className=\"menu_wrapper_item\" key={i} style={{width: 100 / navs.length + '%'}}>\n                  <MenuItem nav={n} active={isActiveNav(n)} />\n                </div>\n              );\n            })\n          }\n        </Col>\n\n        {/* avatar */}\n        <Col span={2}>\n          <UserAvatar />\n        </Col>\n\n      </Row>\n    </div>\n  );\n}\n\nexport default withDefaultProps(defaultProps, withRouter(MyHeader));\n","import { isUndefined } from '@/tools/instance';\n\n/**\n * safeGet 安全的获取对象值\n * obj = {a: {b: {c: 123}}}\n *\n * safeGet(obj, 'a.b.c') // 123\n * safeGet(obj, 'a.b.d', '我是默认值') // 我是默认值\n *\n * @param   {Object}  目标对象\n * @param   {String}  路径字符串 \"a.b.c\"\n * @param   {Any}     默认值\n * @return  {Any}     获取到的值\n */\nexport function safeGet<T>(targetObj: object, keyString: string, defaultValue: T) {\n  const path = String(keyString).split('.')\n  const result = path.reduce((preObj, curPath) => {\n    return (preObj !== null && !isUndefined(preObj))\n      ? (preObj as any)[curPath]\n      : preObj\n  }, targetObj)\n\n  return isUndefined(result)\n    ? (isUndefined(defaultValue) ? result : defaultValue)\n    : result\n}\n","import React, { FC } from 'react';\r\nimport {\r\n  Row,\r\n  Col,\r\n} from 'antd';\r\n\r\nimport './index.less';\r\n\r\nconst year = new Date().getFullYear();\r\n\r\nconst MyFooter: FC = () => {\r\n  return (\r\n    <footer className=\"my_footer_component\">\r\n      <Row className=\"inner\">\r\n        <Col span={10}>Copyright © 2009 - {year} Edutech, Inc. All rights reserved.</Col>\r\n        <Col span={14}>\r\n          版权所有：上海易教信息科技有限公司\r\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n          <a rel=\"noopener noreferrer\" href=\"http://www.educationtek.com/\" target=\"_blank\">www.educationtek.com</a>\r\n        </Col>\r\n      </Row>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default MyFooter;\r\n","import React, { memo, FC, useCallback } from 'react';\nimport {\n  Breadcrumb,\n} from 'antd';\n\nimport AWRouter, { withRouter, RouteComponentProps } from 'aw-react-router';\nimport BaseLayoutStore, { BreadcrumbsType } from '@/store/base-layout';\n\nconst Breadcrumbs: FC<RouteComponentProps> = ({ history }) => {\n  const { state } = BaseLayoutStore.useStore();\n\n  const defaultHandler = useCallback((b: BreadcrumbsType) => {\n    if (!b.handler && b.routeName) {\n      const route = AWRouter.instance().find(b.routeName);\n      history.push(route ? route.fullPath : '/404');\n    }\n  }, []);\n\n  return (\n    <Breadcrumb separator=\">\">\n      {\n        state.breadcrumbs.map((b) => {\n          const handler = b.handler || defaultHandler;\n\n          return (\n            <Breadcrumb.Item key={b.name} onClick={() => handler(b)}>\n              {b.name}\n            </Breadcrumb.Item>\n          );\n        })\n      }\n    </Breadcrumb>\n  );\n}\n\nexport default memo(withRouter(Breadcrumbs));\n","import React, { memo } from 'react';\n\nimport './index.less';\n\nimport { AWRouteLayout } from 'aw-react-router';\nimport { withStoreProviders } from 'aw-react-store';\n\nimport BaseLayoutStore from '@/store/base-layout';\n\nimport MyHeader from '@/components/MyHeader';\nimport MyFooter from '@/components/MyFooter';\n\nimport Breadcrumbs from './Breadcrumbs';\nimport { useNavs } from './hooks';\n\n\nconst BaseLayout: AWRouteLayout = memo(({ routerView }) => {\n  const navs = useNavs();\n\n  return (\n    <div className=\"base_layout\">\n      <div className=\"header_wrapper\">\n        <MyHeader navs={navs} />\n      </div>\n\n      <div className=\"breadcrumb_wrapper\">\n        <Breadcrumbs />\n      </div>\n\n      <div className=\"main\">\n        {\n          routerView()\n        }\n      </div>\n\n      <MyFooter />\n    </div>\n  );\n});\n\nBaseLayout.displayName = 'BaseLayout';\n\nexport default withStoreProviders(BaseLayout, [BaseLayoutStore]);\n","// 模块权限\nimport * as MAP from './map';\n\n/** 智慧课堂权限 */\nexport const CLASSROOM_AUTH = [\n  MAP.auth_intelligent_classroom,\n];\n\n/** 作业辅导权限 */\nexport const COACH_AUTH = [\n  MAP.auth_coach,\n];\n\n/** 入学考试权限 */\nexport const EXAM_AUTH = [\n  MAP.auth_exam,\n];\n\n/** 导学本权限 */\nexport const GUIDE_AUTH = [\n  MAP.auth_guide,\n];\n\n/** 题库权限 */\nexport const QUESTIONS_AUTH = [\n  MAP.auth_questionbank,\n];\n\n/** 备课中心权限 */\nexport const RESOURCE_AUTH = [\n  MAP.auth_resource,\n];\n\n/** 统计分析权限 */\nexport const STATISTICS_AUTH = [\n  MAP.auth_statistics,\n];\n\n/** 课本权限 */\nexport const TEXTBOOK_AUTH = [\n  MAP.auth_textbook,\n];\n\n/** 使用向导权限 */\nexport const WIZARD_AUTH = [\n  MAP.auth_user_guidance,\n];\n\n/** 网络作业权限 */\nexport const WORK_AUTH = [\n  MAP.auth_homework,\n];\n\n/** 错题集权限 */\nexport const WRONG_AUTH = [\n  MAP.auth_mistakecollection,\n];\n","// 完整权限映射表\n\n/** ---------------------------------------- 导学本 ---------------------------------------- */\n// 导学本模块\nexport const auth_guide = 'guide_book_tea';\n// 导学本新建\nexport const auth_guide__gbt_guide_book_add = 'gbt_guide_book_add';\n// 导学本删除\nexport const auth_guide__gbt_guide_book_del = 'gbt_guide_book_del';\n// 导学本移动\nexport const auth_guide__gbt_guide_book_move = 'gbt_guide_book_move';\n// 导学本共享\nexport const auth_guide__gbt_guide_book_share = 'gbt_guide_book_share';\n// 下载资源\nexport const auth_guide__gbt_resource_download = 'gbt_resource_download';\n// 测验\nexport const auth_guide__gbt_examination = 'gbt_examination';\n\n/** ---------------------------------------- 统计分析 ---------------------------------------- */\n// 统计分析模块\nexport const auth_statistics = 'statistics_tea';\n\n/** ---------------------------------------- 作业辅导 ---------------------------------------- */\n// 作业辅导模块\nexport const auth_coach = 'coach_tea';\n// 新建辅导\nexport const auth_coach__ct_coach_add = 'ct_coach_add';\n// 删除辅导\nexport const auth_coach__ct_coach_del = 'ct_coach_del';\n// 导入微课\nexport const auth_coach__ct_WK_import = 'ct_WK_import';\n// 题库选题\nexport const auth_coach__ct_questionbank_selection = 'ct_questionbank_selection';\n// 导出题目\nexport const auth_coach__ct_question_export = 'ct_question_export';\n// 看讲解\nexport const auth_coach__ct_read_explanation = 'ct_read_explanation';\n// 解析答案\nexport const auth_coach__ct_analyze_answer = 'ct_analyze_answer';\n// 加入错题集\nexport const auth_coach__ct_mistakecollection_add = 'ct_mistakecollection_add';\n// 移出辅导\nexport const auth_coach__ct_coach_rmv = 'ct_coach_rmv';\n// 下载辅导\nexport const auth_coach__ct_coach_download = 'ct_coach_download';\n// 点赞\nexport const auth_coach__ct_thumb_up = 'ct_thumb-up';\n// 关联知识点\nexport const auth_coach__ct_knowledge_associate = 'ct_knowledge_associate';\n\n/** ---------------------------------------- 网络作业 ---------------------------------------- */\n// 网络作业模块\nexport const auth_homework = 'homework_tea';\n// 布置作业\nexport const auth_homework__ht_homework_arrange = 'ht_homework_arrange';\n// 删除\nexport const auth_homework__ht_homework_del = 'ht_homework_del';\n// 发布到其他班级\nexport const auth_homework__ht_otherclass_publish = 'ht_otherclass_publish';\n// 加入错题集\nexport const auth_homework__ht_mistakecollection_add = 'ht_mistakecollection_add';\n// 复制作业\nexport const auth_homework__ht_homework_copy = 'ht_homework_copy';\n// 下载作业\nexport const auth_homework__ht_homework_download = 'ht_homework_download';\n// 下载答案\nexport const auth_homework__ht_homework_answer = 'ht_homework_answer';\n// 分享作业\nexport const auth_homework__ht_homework_share = 'ht_homework_share';\n// 参考资料\nexport const auth_homework__ht_homework_attachment = 'ht_homework_attachment';\n// 求讲解\nexport const auth_homework__ht_answer_temporary_save = 'ht_answer_temporary_save';\n// 暂存作业答案\nexport const auth_homework__ht_explanation_seek = 'ht_explanation_seek';\n\n/** ---------------------------------------- 错题集 ---------------------------------------- */\n// 错题集模块\nexport const auth_mistakecollection = 'mistakecollection_tea';\n\n/** ---------------------------------------- 备课中心(个人) ---------------------------------------- */\n// 个人备课中心模块\nexport const auth_resource = 'resource_tea';\n// 上传资源\nexport const auth_resource__rt_resource_upload = 'rt_resource_upload';\n// 删除资源\nexport const auth_resource__rt_resource_del = 'rt_resource_del';\n// 使用到导学本\nexport const auth_resource__rt_use_to_guide_book = 'rt_use_to_guide_book';\n// 发到校本资源\nexport const auth_resource__rt_publish_to_school = 'rt_publish_to_school';\n// 下载资源\nexport const auth_resource__rt_resource_download = 'rt_resource_download';\n\n/** ---------------------------------------- 备课中心(校本) ---------------------------------------- */\n// 校本备课中心模块\nexport const auth_resource_school = 'resource_school_tea';\n// 上传资源\nexport const auth_resource_school__rst_resource_upload = 'rst_resource_upload';\n// 删除资源\nexport const auth_resource_school__rst_resource_del = 'rst_resource_del';\n// 使用到导学本\nexport const auth_resource_school__rst_use_to_guide_book = 'rst_use_to_guide_book';\n// 下载资源\nexport const auth_resource_school__rst_resource_download = 'rst_resource_download';\n\n/** ---------------------------------------- 备课中心(公共) ---------------------------------------- */\n// 公共备课中心模块\nexport const auth_resource_public = 'resource_common_tea';\n// 下载资源\nexport const auth_resource_public__rct_resource_download = 'rct_resource_download';\n// 使用到导学本\nexport const auth_resource_public__rct_use_to_guide_book = 'rct_use_to_guide_book';\n\n/** ---------------------------------------- 题库(个人) ---------------------------------------- */\n// 个人题库模块\nexport const auth_questionbank = 'questionbank_tea';\n// 新增题目\nexport const auth_questionbank__qt_question_add = 'qt_question_add';\n// 批量导入\nexport const auth_questionbank__qt_question_batch_import = 'qt_question_batch_import';\n// 删除题目\nexport const auth_questionbank__qt_question_del = 'qt_question_del';\n// 试题篮\nexport const auth_questionbank__qt_question_basket = 'qt_question_basket';\n// 编辑题目\nexport const auth_questionbank__qt_question_edit = 'qt_question_edit';\n// 解析答案\nexport const auth_questionbank__qt_analyze_answer = 'qt_analyze_answer';\n// 看/录讲解\nexport const auth_questionbank__qt_explanation_read_and_record = 'qt_explanation_read/record';\n// 加入校本题库\nexport const auth_questionbank__qt_add_to_school_questionbank = 'qt_add_to_school_questionbank';\n\n/** ---------------------------------------- 题库(校本) ---------------------------------------- */\n// 校本题库模块\nexport const auth_questionbank_school = 'questionbank_school_tea';\n// 新增题目\nexport const auth_questionbank_school__qst_question_add = 'qst_question_add';\n// 批量导入\nexport const auth_questionbank_school__qst_question_batch_import = 'qst_question_batch_import';\n// 删除题目\nexport const auth_questionbank_school__qst_question_del = 'qst_question_del';\n// 试题篮\nexport const auth_questionbank_school__qst_question_basket = 'qst_question_basket';\n// 编辑题目\nexport const auth_questionbank_school__qst_question_edit = 'qst_question_edit';\n// 解析答案\nexport const auth_questionbank_school__qst_analyze_answer = 'qst_analyze_answer';\n// 看讲解\nexport const auth_questionbank_school__qst_explanation_read = 'qst_explanation_read';\n// 录讲解\nexport const auth_questionbank_school__qst_explanation_record = 'qst_explanation_record';\n\n/** ---------------------------------------- 题库(公共) ---------------------------------------- */\n// 公共题库模块\nexport const auth_questionbank_public = 'questionbank_common_tea';\n// 试题篮\nexport const auth_questionbank_public__qct_question_basket = 'qct_question_basket';\n// 看解析\nexport const auth_questionbank_public__qct_analyze_answer = 'qct_analyze_answer';\n\n/** ---------------------------------------- 智慧课堂 ---------------------------------------- */\n// 智慧课堂模块\nexport const auth_intelligent_classroom = 'intelligent_classroom';\n// 课堂报告\nexport const auth_intelligent_classroom__classroom_report = 'classroom_report';\n\n/** ---------------------------------------- 课本 ---------------------------------------- */\n// 课本模块\nexport const auth_textbook = 'textbook_tea';\n// 个人课本 (添加、修改、删除)\nexport const auth_textbook__tt_personal_textbook = 'tt_personal_textbook';\n// 校本课本 (添加、修改、删除)\nexport const auth_textbook__tt_school_textbook = 'tt_school_textbook';\n\n/** ---------------------------------------- 个人中心 ---------------------------------------- */\n// 班级设置\nexport const auth_usercenter__class_setting = 'class_setting';\n\n/** ---------------------------------------- 使用向导 ---------------------------------------- */\n// 使用向导模块\nexport const auth_user_guidance = 'user_guidance_tea';\n\n/** ---------------------------------------- 入学考试 ---------------------------------------- */\n// 入学考试模块\nexport const auth_exam = 'exam_school_tea';\n\n/** ---------------------------------------- 录播平台 ---------------------------------------- */\n// 录播平台模块\nexport const auth_record_play = 'record_play_tea';\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { CLASSROOM_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '智慧课堂';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'classroom',\n    path: '/classroom',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: CLASSROOM_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'classroom-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'classroom-list' */ '@/pages/ClassRoom')} />,\n        meta: {\n          hanName: `${TOP_NAV_NAME}列表`,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: CLASSROOM_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { COACH_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '作业辅导';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'coach',\n    path: '/coach',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: COACH_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'coach-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'coach_list' */ '@/pages/Coach')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: COACH_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { EXAM_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '入学考试';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'exam',\n    path: '/exam',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: EXAM_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'exam-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'exam-list' */ '@/pages/Exam')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: EXAM_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { GUIDE_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '导学本';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'guide',\n    path: '/guide',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: GUIDE_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'guide-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'guide-list' */ '@/pages/Guide')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: GUIDE_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { QUESTIONS_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '题库';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'questions',\n    path: '/questions',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: QUESTIONS_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'questions-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'questions-list' */ '@/pages/Questions')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: QUESTIONS_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { RESOURCE_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '备课中心';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'resource',\n    path: '/resource',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: RESOURCE_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'resource-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'resource-list' */ '@/pages/Resource')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: RESOURCE_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { STATISTICS_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '统计分析';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'statistics',\n    path: '/statistics',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: STATISTICS_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        name: 'resource-view',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'resource-view' */ '@/pages/Statistics')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: STATISTICS_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { TEXTBOOK_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '课本管理';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'textbook',\n    path: '/textbook',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: TEXTBOOK_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        name: 'textbook-chapter',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'textbook-chapter' */ '@/pages/Textbook')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: TEXTBOOK_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { WIZARD_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '使用向导';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'wizard',\n    path: '/wizard',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: WIZARD_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        name: 'wizard-wk',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'wizard-wk' */ '@/pages/Wizard')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: WIZARD_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport AWSuspense from '@/routes/suspense';\nimport { AWRouteConfig } from 'aw-react-router';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { WORK_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '网络作业';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'work',\n    path: '/work',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: WORK_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'work-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'work-list' */ '@/pages/Work/List')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: WORK_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\nimport { WRONG_AUTH } from '@/auth/page';\n\nconst TOP_NAV_NAME = '错题集';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'wrong',\n    path: '/wrong',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: WRONG_AUTH,\n    },\n    children: [\n      {\n        default: true,\n        path: '/list',\n        name: 'wrong-list',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'wrong-list' */ '@/pages/Wrong')} />,\n        meta: {\n          hanName: TOP_NAV_NAME,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: WRONG_AUTH,\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport BaseLayout from '@/layouts/Base';\nimport { RouteMeta } from '@/routes/type';\n\nconst TOP_NAV_NAME = '个人设置';\n\nconst routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'settings',\n    path: '/settings',\n    component: BaseLayout,\n    meta: {\n      hanName: TOP_NAV_NAME,\n      title: `教学平台-${TOP_NAV_NAME}`,\n      topNavName: TOP_NAV_NAME,\n      auth: [],\n    },\n    children: [\n      {\n        default: true,\n        name: 'settings-default',\n        component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'settings' */ '@/pages/Settings')} />,\n        meta: {\n          hanName: `${TOP_NAV_NAME}`,\n          title: `教学平台-${TOP_NAV_NAME}`,\n          topNavName: TOP_NAV_NAME,\n          auth: [],\n        },\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\n\nimport { AWRouteConfig } from 'aw-react-router';\nimport AWSuspense from '@/routes/suspense';\nimport { RouteMeta } from '@/routes/type';\n\nimport classroomRoutes from '@/routes/pages/classroom';\nimport coachRoutes from '@/routes/pages/coach';\nimport examRoutes from '@/routes/pages/exam';\nimport guideRoutes from '@/routes/pages/guide';\nimport questionsRoutes from '@/routes/pages/questions';\nimport resourceRoutes from '@/routes/pages/resource';\nimport statisticsRoutes from '@/routes/pages/statistics';\nimport textbookRoutes from '@/routes/pages/textbook';\nimport wizardRoutes from '@/routes/pages/wizard';\nimport workRoutes from '@/routes/pages/work';\nimport wrongRoutes from '@/routes/pages/wrong';\nimport settingsRoutes from '@/routes/pages/settings';\n\nexport const routes: AWRouteConfig<RouteMeta>[] = [\n  {\n    name: 'login',\n    path: '/login',\n    component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'login' */ '@/pages/Login')} />,\n    meta: {\n      title: '登录',\n      hanName: '登录',\n    },\n  },\n  {\n    name: 'home',\n    path: '/',\n    component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'home' */ '@/pages/Home')} />,\n    meta: {\n      title: '首页',\n      hanName: '首页',\n    },\n  },\n\n  ...classroomRoutes,\n  ...coachRoutes,\n  ...examRoutes,\n  ...guideRoutes,\n  ...questionsRoutes,\n  ...resourceRoutes,\n  ...statisticsRoutes,\n  ...textbookRoutes,\n  ...wizardRoutes,\n  ...workRoutes,\n  ...wrongRoutes,\n  ...settingsRoutes,\n\n  {\n    name: '404',\n    path: '/404',\n    component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'notfound' */ '@/pages/Errors/NotFound')} />,\n    meta: {\n      title: '404',\n      hanName: '页面未找到',\n    },\n  },\n  {\n    name: 'unauthorized',\n    path: '/unauthorized',\n    component: (props) => <AWSuspense {...props} load={import(/* webpackChunkName: 'unauthorized' */ '@/pages/Errors/Unauthorized')} />,\n    meta: {\n      title: 'unauthorized',\n      hanName: '无权限访问',\n    },\n  },\n];\n","import { PATCH_CALLBACK_ROUTE_MIDDLEWARE } from '@/config';\nimport { routes } from \"@/routes/routes\";\nimport { RouteMeta } from '@/routes/type';\nimport AWRouter, { AWRouteState } from 'aw-react-router';\nimport { loginRequiredMiddleware, guestMiddleware, authCheckMiddleware } from './middleware/auth';\n\n\n// 加载路由配置\nconst awRouter = AWRouter.instance();\nawRouter.load(routes, {\n  // mode\n  // mode: 'history',\n  mode: 'hash',\n  // not found route name\n  notFoundRouteName: '404',\n  // 全局路由中间件\n  middlewares: [\n    // 设置 title\n    (state: AWRouteState<RouteMeta>) => {\n      const meta = state.meta || {};\n      const routeTitle = meta.title;\n\n      if (routeTitle) {\n        document.title = routeTitle;\n      } else {\n        document.title = ['教学平台', meta.hanName].filter(Boolean).join('-');\n      }\n\n      return null;\n    },\n    PATCH_CALLBACK_ROUTE_MIDDLEWARE,                           // 暴露在 MAIN_CONFIG 中用于调试或打补丁的中间件\n    loginRequiredMiddleware(['404', 'unauthorized', 'login']), // 这些路由不需验证是否登录\n    guestMiddleware(['login']),                                // 只能未登录才可访问\n    // 权限判断 (根据各路由配置的 meta.auth 进行判断)\n    authCheckMiddleware(),\n  ],\n});\n\nexport default awRouter.renderRootRoute();\n","// 权限相关中间件\nimport React from 'react';\nimport { Redirect } from 'aw-react-router';\n\nimport { AWRouteState, AWMiddlewareFunc } from 'aw-react-router';\n\nimport { RouteMeta } from '@/routes/type';\nimport Token from '@/auth/token';\nimport Authority from '@/auth/authority';\nimport { isUndefined } from '@/tools/instance';\n\n\n/**\n * 判断是否登录\n * whiteList: 不验证是否登录的路由 name 的白名单列表\n */\nexport function loginRequiredMiddleware(whiteList?: string[]): AWMiddlewareFunc {\n  return function (state: AWRouteState) {\n    // 路由名在白名单中，不需要验证是否登录\n    if (whiteList && whiteList.length) {\n      if (whiteList.indexOf(state.name) !== -1) {\n        return null;\n      }\n    }\n\n    if (Token.isLogin()) {\n      return null;\n    }\n\n    return <Redirect to=\"/login\" />;\n  }\n}\n\n/**\n * 未登录才可访问\n * checkList: 该列表中的 route name 的路由未登录才可访问\n */\nexport function guestMiddleware(checkList?: string[]): AWMiddlewareFunc {\n  return function (state: AWRouteState) {\n    if (checkList && checkList.length) {\n      if (checkList.indexOf(state.name) === -1) {\n        return null;\n      }\n    }\n\n    if (!Token.isLogin()) {\n      return null;\n    }\n\n    return <Redirect to=\"/\" />;\n  }\n}\n\n\n/** 用于权限判断的中间件 (也会判断是否登录了) */\nexport function authCheckMiddleware() {\n  return function (state: AWRouteState<RouteMeta>) {\n    const meta = state.meta || {};\n    const auths = meta.auth || [];\n    const strict = isUndefined(meta.authUnstrict) ? true : !meta.authUnstrict;\n\n    // 权限检查 (有配置才需检查)\n    if (!auths.length) {\n      return null;\n    }\n    if (Authority.checkAll(auths, strict)) {\n      return null;\n    }\n\n    return <Redirect to=\"/unauthorized\" />\n  }\n}\n","import { useCallback, useMemo, useReducer } from 'react';\r\nimport PminDelay from 'p-min-delay';\r\n\r\nimport { CommonResponse } from '@/services/type';\r\n\r\ninterface PromiseErrorType {\r\n  hasError: boolean\r\n  errorMessage?: string\r\n}\r\n\r\ninterface UsePromiseOptions<T> {\r\n  delay?: number  // 当 promise 执行时间小于 delay 时，会等待 delay 时间过后再改变状态\r\n  checkError?: (result: T) => PromiseErrorType // 用于检测 promise 是否有错误\r\n}\r\n\r\ninterface UsePromiseReturn<T> {\r\n  initial: boolean         // 初始状态，promise 还未执行\r\n  run: () => Promise<void>          // 触发 promise\r\n  pending: boolean         // promise 执行中\r\n  hasError: boolean        // 发生错误了\r\n  errorMessage: string     // 错误信息\r\n  result: T                // promise 的返回值\r\n}\r\n\r\nenum ActionType {\r\n  START = 'START',         // 开始执行 promise\r\n  FINISH = 'FINISH',       // promise 执行结束\r\n  HAS_ERROR = 'HAS_ERROR', // promise 出现错误\r\n}\r\n\r\ninterface PromiseState<Result = any> {\r\n  initial: boolean\r\n  pending: boolean\r\n  hasError: boolean\r\n  errorMessage: string\r\n  result: Result\r\n}\r\n\r\ninterface ActionPayload<Result = any> {\r\n  hasError: boolean,\r\n  errorMessage: string\r\n  result: Result\r\n}\r\n\r\ninterface ActionData<Result = any> {\r\n  type: ActionType\r\n  payload?: ActionPayload<Result>\r\n}\r\n\r\nfunction promiseReducer(state: PromiseState, action: ActionData): PromiseState {\r\n  switch (action.type) {\r\n    case ActionType.START:\r\n      return {\r\n        ...state,\r\n        initial: false,\r\n        pending: true,\r\n        errorMessage: '',\r\n        hasError: false,\r\n      };\r\n    case ActionType.FINISH:\r\n      return {\r\n        ...state,\r\n        initial: false,\r\n        pending: false,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.HAS_ERROR:\r\n      return {\r\n        ...state,\r\n        initial: false,\r\n        pending: false,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst startActionCreator = (): ActionData => ({type: ActionType.START});\r\nconst finishActionCreator = (result: any): ActionData => {\r\n  return { type: ActionType.FINISH, payload: {\r\n    hasError: false,\r\n    errorMessage: '',\r\n    result,\r\n  } };\r\n}\r\nconst hasErrorActionCreator = (errorMessage = '', result: any = null,): ActionData => {\r\n  return {\r\n    type: ActionType.HAS_ERROR,\r\n    payload: { hasError: true, errorMessage, result },\r\n  };\r\n}\r\n\r\nexport function usePromise<Result>(\r\n  func: () => Promise<Result>,\r\n  initialState: Result,\r\n  {\r\n    delay,\r\n    checkError,\r\n  }: UsePromiseOptions<Result> = {},\r\n): UsePromiseReturn<Result> {\r\n  const [state, dispatch] = useReducer(promiseReducer, {\r\n    initial: true,\r\n    pending: true,\r\n    hasError: false,\r\n    errorMessage: '',\r\n    result: initialState,\r\n  });\r\n\r\n  const run = useCallback(\r\n    async () => {\r\n      dispatch(startActionCreator());\r\n\r\n      try {\r\n        let resp: Result;\r\n        if (delay) {\r\n          resp = await PminDelay(func(), delay);\r\n        } else {\r\n          resp = await func();\r\n        }\r\n\r\n        if (checkError) {\r\n          const e = checkError(resp);\r\n          if (e.hasError) {\r\n            dispatch(hasErrorActionCreator(e.errorMessage, resp));\r\n            return;\r\n          }\r\n        }\r\n\r\n        dispatch(finishActionCreator(resp));\r\n      } catch (err) {\r\n        dispatch(hasErrorActionCreator(String(err)));\r\n        console.warn('usePromise error: ', err);\r\n      }\r\n    },\r\n    [delay, checkError],\r\n  );\r\n\r\n  return useMemo(\r\n    () => ({\r\n      ...state,\r\n      run,\r\n    }),\r\n    [state, run],\r\n  );\r\n}\r\n\r\nexport function useRequest<Result> (\r\n  func: () => Promise<CommonResponse<Result>>,\r\n  initialState: Result,\r\n  {\r\n    delay,\r\n    checkError,\r\n  }: UsePromiseOptions<CommonResponse<Result>> = {},\r\n) {\r\n  const check = useMemo(() => {\r\n    if (!checkError) {\r\n      return (result: CommonResponse<Result>) => {\r\n        if (!result.status) {\r\n          return { hasError: true, errorMessage: result.message || '' };\r\n        }\r\n\r\n        return { hasError: false, errorMessage: '' };\r\n      };\r\n    }\r\n    return checkError;\r\n  }, []);\r\n\r\n  const pr = usePromise(func,\r\n    { status: true, message: '', data: initialState },\r\n    { delay, checkError: check },\r\n  );\r\n\r\n  return {\r\n    ...pr,\r\n    result: pr.result.data,\r\n  }\r\n}","// 错误边界\r\nimport React, { ErrorInfo, ComponentType } from 'react';\r\n\r\ninterface Props {\r\n  ErrorComponent?: ComponentType\r\n}\r\n\r\ninterface States {\r\n  hasError: boolean\r\n}\r\n\r\nclass ErrorBoundary extends React.Component<Props, States> {\r\n\r\n  state = {\r\n    hasError: false,\r\n  }\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: any) {\r\n    console.error(\"ErrorBoundary: \", error);\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error(\"ErrorBoundary: \", {\r\n      error, errorInfo\r\n    });\r\n    this.setState({\r\n      hasError: true,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { children, ErrorComponent } = this.props;\r\n\r\n    if (this.state.hasError) {\r\n      if (ErrorComponent) {\r\n        return <ErrorComponent />\r\n      }\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n    \r\n\r\n    return children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;","import React, { useEffect } from 'react';\n\nimport { withStoreProviders } from 'aw-react-store';\nimport AuthStore from '@/store/auth';\nimport routes from \"@/routes\";\nimport ErrorBoundary from '@/components/ErrorBoundary';\nimport { useRequest } from './tools/hooks/async';\n\n\nconst App: React.FC = () => {\n  const { getUserInfoAction } = AuthStore.useStore();\n  const { pending, run } = useRequest(getUserInfoAction, {});\n\n  useEffect(() => {\n    run();\n  }, []);\n\n  return (\n    <ErrorBoundary>\n      {\n        pending\n          ? <div className=\"common_page_placeholder\">loading ...</div>\n          : routes\n      }\n    </ErrorBoundary>\n  );\n}\n\nexport default withStoreProviders(App, [AuthStore]);\n","// ---------------------------------------- css ----------------------------------------\nimport '@/assets/styles/index.less';\n\n// ---------------------------------------- main ----------------------------------------\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport FastClick from 'fastclick';\nimport { message as messageAlert } from 'antd';\n\n// ---------------------------------------- 其他 ----------------------------------------\nimport { APP_ROOT_ID } from '@/constants';\nimport { isDev } from \"@/config\";\nimport App from '@/App';\nimport Token from '@/auth/token';\n\n// ---------------------------------------- 错误处理 ----------------------------------------\nwindow.onerror = (event: Event | string, source?: string, fileno?: number, columnNumber?: number, error?: Error) => {\n  const error_data = {\n    title: document.getElementsByTagName('title')[0].innerText,\n    error_event: event,\n    script_url: source,\n    line_number: fileno,\n    column_number: columnNumber,\n    error_detail: (error && error.message) || '',\n    error_stack: (error && error.stack) || '',\n    user_agent: window.navigator.userAgent,\n    location_href: window.location.href,\n    token: Token.get(),\n  };\n  const event_string = String(error_data.error_event || '');\n\n  if (event_string === 'ResizeObserver loop limit exceeded') { return; }\n\n  const SCRIPT_ERROR = 'Unexpected token <'; // 脚本错误 (一般是服务器中的前端代码更新了，浏览器缓存中的 js 代码由于不一致而报错)\n  const CHUNK_ERROR = 'chunk';\n\n  if (event_string.indexOf(SCRIPT_ERROR) !== -1 || event_string.indexOf(CHUNK_ERROR) !== -1) {\n    messageAlert.warning('发现新版本，请使用刷新网页');\n  }\n};\n\n// ---------------------------------------- 挂载 ----------------------------------------\n(FastClick as any).attach(document.body);\n\n// ---------------------------------------- token ----------------------------------------\nwindow.addEventListener('storage', (ev: StorageEvent) => {\n  const key = ev.key;\n  const val = ev.newValue;\n\n  if (key === Token.key && val === null) { Token.clean(); }\n});\n\n// logout 时的 callback\nToken.logoutCallback = () => {\n  window.localStorage.clear();\n  window.sessionStorage.clear();\n}\n\n// ======================================= RENDER =======================================\nfunction createApp() {\n  return (\n    <App />\n  );\n}\n\nfunction render() {\n  ReactDOM.render(\n    createApp(),\n    document.getElementById(APP_ROOT_ID),\n  );\n}\n\nif (isDev()) {\n  // DEVELOPMENT\n  const devRender = () => {\n    if ((module as any).hot) {\n      (module as any).hot.accept('./App', () => render());\n    }\n\n    render();\n  }\n\n  try {\n    devRender();\n  } catch (error) {\n    console.error(error);\n    render();\n  }\n} else {\n  // PRODUCTION\n  render();\n}\n","\r\n/** 判断是否为 promise */\r\nexport function isPromise(val: any) {\r\n  return val && typeof val.then === 'function';\r\n}\r\n\r\n/** 判断是否未 undefined */\r\nexport function isUndefined(val: any): boolean {\r\n  return val === void 0;\r\n}","/** react 挂载的 dom root id */\r\nexport const APP_ROOT_ID = 'root';","// 用户相关常量\n\n// 用户类型\nexport enum USER_TYPE {\n  SUPER_ADMIN = 0, // 超级管理员\n  ADMIN = 1,       // 学校管理员\n  TEACHER = 2,     // 教师\n  STUDENT = 3,     // 学生\n}\n\n/**\n * 角色类型\n * - 1: 教师 TEACHER\n * - 2: 班主任 HEAD_TEACHER\n * - 3: 学生 STUDENTS\n * - 4: 校长 PRINCIPAL\n * - 5: 年级主任 GRADE_DIRECTOR\n * - 6: 科目组长 SUBJECT_LEADER\n */\nexport enum ROLE_TYPE {\n  TEACHER = 1,\n  HEAD_TEACHER = 2,\n  STUDENTS = 3,\n  PRINCIPAL = 4,\n  GRADE_DIRECTOR = 5,\n  SUBJECT_LEADER = 6,\n}\n\n// 是否为默认角色\nexport enum ROLE_STATUS {\n  IS = 1,\n  NO = 0,\n}\n","\nexport const PAGE_NAMES = [\n  {\n    name: 'resource',\n  },\n  {\n    name: 'coach',\n  },\n  {\n    name: 'guide',\n  },\n  {\n    name: 'wrong',\n  },\n  {\n    name: 'classroom',\n  },\n  {\n    name: 'work',\n  },\n  {\n    name: 'statistics',\n  },\n  {\n    name: 'questions',\n  },\n  {\n    name: 'exam',\n  },\n];\n","export * from './app';\nexport * from './pages';\nexport * from './user';\n","module.exports = main_library;","// 权限模块\ninterface AuthorityConstructorOptions {\n  /** 是否 mock 权限 (会得到所有权限) */\n  mock: boolean\n}\n\nclass Authority {\n\n  private static _instance: Authority | null = null;\n\n  public static instance(opt?: AuthorityConstructorOptions): Authority {\n    if (this._instance === null) {\n      this._instance = new this(opt || {});\n    }\n\n    return this._instance!;\n  }\n\n  /** 不判断权限 (用于调试) */\n  private mock: boolean;\n\n  constructor({\n   mock = false,\n  }: Partial<AuthorityConstructorOptions>) {\n    this.mock = mock;\n  }\n\n  /** 是否已加载过权限 */\n  public loaded = false;\n  /** 权限表 */\n  public authStore: string[] = [];\n\n  /** 加载权限 */\n  public load(authArr: string[] = []) {\n    if (this.loaded) {\n      return;\n    }\n\n    this.authStore = authArr;\n    this.loaded = true;\n  }\n\n  /** 加载权限 (map 形式) */\n  public loadMap(authMap: AW.UserAuthMapType = {}) {\n    if (this.loaded) {\n      return;\n    }\n\n    let authArr: string[] = [];\n    for (const key in authMap) {\n      if (authMap.hasOwnProperty(key)) {\n        const item = authMap[key];\n        authArr.push(key);\n        authArr = authArr.concat(item);\n      }\n    }\n\n    this.load(authArr);\n  }\n\n  /** 重新加载权限 */\n  public reload(authArr: string[] = []) {\n    this.authStore = authArr;\n    this.loaded = true;\n  }\n\n  /** 检查权限 */\n  public check(auth: string): boolean {\n    if (!this.loaded) {\n      throw new Error('Authority: 还未加载权限数据');\n    }\n\n    if (this.mock) { return true; }\n\n    if (!this.authStore.length) {\n      return false;\n    }\n\n    return this.authStore.indexOf(auth) !== -1;\n  }\n\n  /**\n   * 检查权限\n   * strict: true，auths 中必须全部存在才通过，否则一个通过即可\n   */\n  public checkAll(auths: string[], strict = true): boolean {\n    if (strict) {\n      return auths.every((a) => this.check(a));\n    }\n\n    return auths.some((a) => this.check(a));\n  }\n\n}\n\nconst instance = Authority.instance({\n  mock: false,\n});\n\nexport default instance;\n\n(window as any).__Authority__ = instance;\n","import AWStorage, { AWStorageConstructorOptions, NO_VALIDATE_EXPIRE } from 'aw-easy-storage';\nimport { LOCALSTROAGE_PREFIX, DISABLED_EXPIRE } from '@/config';\n\nconst AWStorageFactory = ({\n  enableLog = false,\n  disabled = false,\n  prefix = LOCALSTROAGE_PREFIX,\n  session = false,\n  hasMeta = true,\n  expire = NO_VALIDATE_EXPIRE,\n  // 当 expire 设置为 DISABLED_EXPIRE，则相当于永远都是过期的 (禁用缓存)\n  checkExpire = (e) => e === DISABLED_EXPIRE,\n}: Partial<AWStorageConstructorOptions>) => {\n  return new AWStorage({\n    enableLog,\n    disabled,\n    session,\n    prefix,\n    hasMeta,\n    expire,\n    checkExpire,\n  });\n};\n\nexport default AWStorageFactory;\n","// base layout 的一些状态\nimport { useSetState, UseSetState } from \"react-hanger\";\n\nimport { BaseValue, createStore } from 'aw-react-store';\n\nexport interface BreadcrumbsType {\n  name: string\n  routeName?: string\n  handler?: (b: BreadcrumbsType) => void\n}\n\ninterface State {\n  readonly breadcrumbs: Readonly<BreadcrumbsType[]> // 面包屑\n}\n\nconst initialState: State = {\n  breadcrumbs: [],\n};\n\nexport interface BaseLayoutValue extends BaseValue<State> {\n  // actions\n  setBreadcrumbsAction: (breadcrumbs: BreadcrumbsType[]) => void\n\n  // getters\n}\n\n/** 设置 layout 的面包屑 */\nfunction setBreadcrumbsAction(state: UseSetState<State>) {\n  return (breadcrumbs: BreadcrumbsType[]) => {\n    state.setState({\n      breadcrumbs,\n    });\n  }\n}\n\nfunction useBaseLayout(): BaseLayoutValue {\n  const state = useSetState<State>(initialState);\n\n  return {\n    state: state.state,\n\n    // actions\n    setBreadcrumbsAction: setBreadcrumbsAction(state),\n  };\n}\n\nexport default createStore(useBaseLayout);\n","import { AxiosRequestConfig } from 'axios';\r\n\r\nexport const URLENCODED_CONTENT_TYPE = {\r\n  'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\r\n};\r\nexport const JSON_CONTENT_TYPE = {\r\n  'Content-Type': 'application/json;charset=UTF-8',\r\n};\r\nexport const CommonErrorMessage = '网络错误';\r\n\r\nexport interface MyAxiosRequestConfig extends AxiosRequestConfig {\r\n  json?: boolean     // 设置请求头为 JSON_CONTENT_TYPE\r\n  showErrorMessage?: boolean // 是否弹窗错误 message\r\n}\r\n\r\n/** 后端响应的数据格式 */\r\nexport interface APIResponseData<T = any> {\r\n  code: number\r\n  data: T\r\n  msg: string\r\n  token: string | null\r\n}\r\n\r\n/** services 整理后的数据格式 */\r\nexport interface CommonResponse<T = any> {\r\n  status: boolean\r\n  message: string\r\n  data: T\r\n}","// 成功\r\nexport const OK_CODE = 200;\r\n\r\n// 用户未登录\r\nexport const NO_LOGIN_CODE = 464;\r\n\r\n// 其他错误\r\nexport const OTHER_ERROR_CODES = [\r\n  599,  // 加载失败\r\n  532,  // 调用第三方错误\r\n  9999, // 服务不可用\r\n  -1,   // 未知错误\r\n];","import Axios, { AxiosResponse } from 'axios';\r\nimport qs from 'qs';\r\nimport { message } from 'antd';\r\n\r\nimport {\r\n  MyAxiosRequestConfig,\r\n  URLENCODED_CONTENT_TYPE,\r\n  JSON_CONTENT_TYPE,\r\n  APIResponseData,\r\n  CommonResponse,\r\n  CommonErrorMessage,\r\n} from './type';\r\nimport {\r\n  OK_CODE,\r\n  NO_LOGIN_CODE,\r\n  OTHER_ERROR_CODES,\r\n} from './code';\r\nimport Token from '@/auth/token';\r\n\r\nconst axios = Axios.create({\r\n  headers: URLENCODED_CONTENT_TYPE,\r\n});\r\n\r\n// request\r\naxios.interceptors.request.use(\r\n  (config: MyAxiosRequestConfig) => {\r\n    // 处理参数\r\n    if (!config.params) { config.params = {}; }\r\n    if (!config.data) { config.data = {}; }\r\n\r\n    const token = Token.get();\r\n    if (token) {\r\n      config.params.token = token; // query 上携带 token\r\n    }\r\n\r\n    if (!config.json) {\r\n      config.data = qs.stringify(config.data);\r\n    } else {\r\n      config.headers = Object.assign({}, (config.headers || {}), JSON_CONTENT_TYPE);\r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error: any) => {\r\n    message.error(error);\r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\n// response\r\naxios.interceptors.response.use(\r\n  (response: AxiosResponse<APIResponseData>) => {\r\n    // 响应数据具体在 services 中处理\r\n    return response;\r\n  },\r\n  (error: any) => {\r\n    message.error(error);\r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\nclass Services {\r\n  private static _instance: Services | null = null;\r\n\r\n  public static instance(): Services {\r\n    if (this._instance === null) {\r\n      this._instance = new this();\r\n    }\r\n\r\n    return this._instance!;\r\n  }\r\n\r\n  private errorResponseData(config: MyAxiosRequestConfig, result?: APIResponseData): CommonResponse<any> {\r\n    const msg = (result && result.msg) ? result.msg : CommonErrorMessage;\r\n\r\n    if (config.showErrorMessage) {\r\n      message.error(msg);\r\n    }\r\n\r\n    return {\r\n      status: false,\r\n      message: msg,\r\n      data: result ? result.data : null,\r\n    } \r\n  }\r\n\r\n  private responseData<T>(config: MyAxiosRequestConfig, result: APIResponseData<T>): CommonResponse<T> {\r\n    const statusCode = Number(result.code);\r\n\r\n    // 如有携带 token，存储\r\n    if (result.token) {\r\n      Token.set(result.token);\r\n    }\r\n\r\n    // 请求成功\r\n    if (statusCode === OK_CODE) {\r\n      return {\r\n        status: true,\r\n        message: result.msg || '成功',\r\n        data: result.data,\r\n      };\r\n    }\r\n\r\n    // 请求失败 (code 处理)\r\n    if (statusCode === NO_LOGIN_CODE) {\r\n      Token.logout({\r\n        triggerGlobalCallback: true,\r\n        reloadPage: true,\r\n      });\r\n\r\n      return this.errorResponseData(config);\r\n    }\r\n\r\n    if (OTHER_ERROR_CODES.indexOf(statusCode) !== -1) {\r\n      return this.errorResponseData(config, result);\r\n    }\r\n\r\n    return this.errorResponseData(config, result);\r\n  }\r\n\r\n  private async request<T>(config: MyAxiosRequestConfig): Promise<CommonResponse<T | null>> {\r\n    try {\r\n      const resp: AxiosResponse<APIResponseData<T>> = await axios(config);\r\n\r\n      return this.responseData<T>(config, resp.data);\r\n    } catch(err) {\r\n      console.warn(err);\r\n      return this.errorResponseData(config);\r\n    }\r\n  }\r\n\r\n  public async get<T>(config: MyAxiosRequestConfig): Promise<CommonResponse<T | null>> {\r\n    return this.request<T>(\r\n      Object.assign({}, config, {method: 'GET'})\r\n    );\r\n  }\r\n\r\n  public async post<T>(config: MyAxiosRequestConfig): Promise<CommonResponse<T | null>> {\r\n    return this.request<T>(\r\n      Object.assign({json: false}, config, {method: 'POST' })\r\n    );\r\n  }\r\n}\r\n\r\nexport default Services.instance();\r\n\r\n(window as any).__Services__ = Services.instance();\r\n","import Services from '@/services/base';\r\nimport { CommonResponse } from '@/services/type';\r\nimport { AUTH_API_ROOT } from '@/config';\r\n\r\ninterface LoginParams {\r\n  username: string\r\n  password: string\r\n}\r\n\r\nexport default class {\r\n\r\n  private static authAPI(api: string) {\r\n    return AUTH_API_ROOT + api;\r\n  };\r\n\r\n  /** 登录 */\r\n  public static async login({username, password}: LoginParams): Promise<CommonResponse<AW.AuthAPIResponseType | null>> {\r\n    const resp = await Services.get<AW.AuthAPIResponseType>({\r\n      url: this.authAPI('/efficiencyLogin'),\r\n      params: { username, password },\r\n      showErrorMessage: false,\r\n    })\r\n\r\n    return resp;\r\n  }\r\n\r\n  /** 获取用户信息 */\r\n  public static async getUserInfo(): Promise<CommonResponse<AW.UserEntityAndTermInfoType | null>> {\r\n    const resp = await Services.get<AW.UserEntityAndTermInfoType>({\r\n      url: this.authAPI('/api/user/efficiency-select-one'),\r\n    });\r\n\r\n    return resp;\r\n  }\r\n\r\n  /** 获取默认学期 */\r\n  public static async getDetaultTerm(): Promise<CommonResponse<AW.TermType>> {\r\n    const resp = await Services.get<any>({\r\n      url: this.authAPI('/api/term/get-default-terminfo'),\r\n    });\r\n\r\n    const _data = resp.data || {};\r\n    const data: AW.TermType = {\r\n      termid: _data.termid,\r\n      termname: _data.yearname + '学年' + _data.termname,\r\n    };\r\n\r\n    return {\r\n      status: resp.status,\r\n      message: resp.message,\r\n      data,\r\n    };\r\n  }\r\n\r\n}\r\n","/** 学期 */\nimport AWStorage from 'aw-easy-storage';\nimport createStorage from '@/storage/base';\n\nclass TermStorage {\n\n  private static _instance: TermStorage | null = null;\n  private storage: AWStorage;\n\n  public static instance(): TermStorage {\n    if (this._instance === null) {\n      this._instance = new this();\n    }\n\n    return this._instance!;\n  }\n\n  constructor() {\n    this.storage = createStorage({\n      hasMeta: false,\n    });\n  }\n\n  public key = 'termid';\n\n  public clean() {\n    return this.storage.remove(this.key);\n  }\n\n  public get(): number | null {\n    return this.storage.getNumber(this.key);\n  }\n\n  public set(id: number) {\n    this.storage.setNumber(this.key, id);\n  }\n\n}\n\nexport default TermStorage.instance();\n\n(window as any).__TermStorage__ = TermStorage.instance();\n","/** 角色 */\nimport AWStorage from 'aw-easy-storage';\nimport createStorage from '@/storage/base';\n\ninterface RoleType {\n  roleid: number\n  roletype: number\n}\n\nclass RoleStorage {\n\n  private static _instance: RoleStorage | null = null;\n  private storage: AWStorage;\n\n  public static instance(): RoleStorage {\n    if (this._instance === null) {\n      this._instance = new this();\n    }\n\n    return this._instance!;\n  }\n\n  constructor() {\n    this.storage = createStorage({\n      hasMeta: false,\n    });\n  }\n\n  private roleStore: RoleType | null = null;\n  public key = 'role';\n\n  public clean() {\n    this.roleStore = null;\n    return this.storage.remove(this.key);\n  }\n\n  public get(): RoleType | null {\n    if (this.roleStore) {\n      return this.roleStore;\n    }\n\n    try {\n      const jsonString = this.storage.getString(this.key);\n      if (!jsonString) {\n        return null;\n      }\n      const data = JSON.parse(jsonString);\n      if (!data.roleid || !data.roletype) {\n        return null;\n      }\n      const roleData: RoleType = {\n        roleid: Number(data.roleid),\n        roletype: Number(data.roletype),\n      };\n      this.roleStore = roleData;\n\n      return roleData;\n    } catch(err) {\n      console.warn(err);\n      return null;\n    }\n  }\n\n  public set(role: RoleType) {\n    this.roleStore = role;\n    this.storage.setString(this.key, JSON.stringify(role));\n  }\n\n  public isTeacherRole(): boolean {\n    const role = this.get();\n    if (!role) {\n      return true; // 默认老师\n    }\n    // 1 为教师角色 (注意: 这里的 type 和用户 category 不一样，那个是判断学生老师管理员身份的)\n    return role.roletype === 1;\n  }\n\n}\n\nexport default RoleStorage.instance();\n\n(window as any).__RoleStorage__ = RoleStorage.instance();\n","// 用户相关 (登录登出、权限 ...)\nimport { useEffect } from \"react\";\nimport { useSetState, UseSetState } from \"react-hanger\";\n\nimport { BaseValue, createStore } from 'aw-react-store';\nimport { CommonResponse } from '@/services/type';\n\nimport { USER_TYPE, ROLE_STATUS } from '@/constants';\nimport Authority from '@/auth/authority';\nimport Token from \"@/auth/token\";\n\nimport UserServices from '@/services/user';\nimport TermStorage from \"@/storage/term\";\nimport RoleStorage from \"@/storage/role\";\n\n\ninterface State {\n  readonly user: Readonly<AW.UserEntity | null> // 用户信息\n  readonly terms: Readonly<AW.TermType[]>       // 学期列表\n  readonly currentTerm: Readonly<AW.TermType | null> // 当前选择的学期\n  readonly currentRole: Readonly<AW.UserRoleType | null> // 当前角色\n}\n\nconst initialState: State = {\n  user: null,\n  terms: [],\n  currentTerm: null,\n  currentRole: null,\n}\n\nexport interface AuthValue extends BaseValue<State> {\n  // actions\n  loginAction: (username: string, password: string) => Promise<CommonResponse>\n  getUserInfoAction: (force?: boolean) => Promise<CommonResponse>\n  logoutAction: () => void\n  setCurrentTermAction: (termid: number) => boolean\n  setCurrentRoleAction: (roleid: number) => boolean\n\n  // getters\n  authGetter: () => Readonly<string[]>\n  termsGetter: () => Readonly<AW.TermType[]>\n  isTeacherGetter: () => boolean\n  rolesGetter: () => AW.UserRoleType[]\n}\n\nfunction setUserToState(data: AW.UserEntityAndTermInfoType, state: UseSetState<State>) {\n  const user = data.userEntity || {};\n  const terms = data.termVos || [];\n\n  Authority.loadMap(user.acl || {});\n  state.setState({ user, terms });\n}\n\n/** 设置默认学期 */\nasync function setDefaultTerm(state: UseSetState<State>, defaultTermID?: number) {\n  const terms = state.state.terms || [];\n  if (!terms.length) {\n    TermStorage.clean();\n    return;\n  }\n\n  const localTermID = TermStorage.get();\n  if (localTermID) {\n    const localTerm = terms.find((t) => t.termid === localTermID);\n    if (localTerm) {\n      setCurrentTermAction(state)(localTerm.termid);\n      return;\n    }\n  }\n\n  if (defaultTermID) {\n    const defaultTerm = terms.find((t) => t.termid === defaultTermID);\n    if (defaultTerm) {\n      setCurrentTermAction(state)(defaultTerm.termid);\n      return;\n    }\n  }\n\n  // localstroage 和 default 没有则发送请求获取\n  const term = await UserServices.getDetaultTerm();\n  setCurrentTermAction(state)(term.data.termid);\n}\n\n/** 设置默认角色 */\nfunction setDefaultRole(state: UseSetState<State>) {\n  const setRole = (roleid: number): boolean => {\n    const inList = roles.find((r) => r.roleid === roleid);\n    if (inList) {\n      setCurrentRoleAction(state)(roleid);\n      return true;\n    }\n\n    return false;\n  }\n\n  if (!state.state.user) {\n    return;\n  }\n\n  const roles = state.state.user.aclrole || [];\n  if (!roles.length) {\n    RoleStorage.clean();\n    return;\n  }\n\n  const localRole = RoleStorage.get();\n  if (localRole) {\n    if (setRole(localRole.roleid)) {\n      return;\n    }\n  }\n\n  const defaultRole = roles.find((r) => r.activestatus === ROLE_STATUS.IS);\n  if (defaultRole) {\n    if (setRole(defaultRole.roleid)) {\n      return;\n    }\n  }\n\n  const firstRole = roles[0];\n  if (firstRole) {\n    setRole(firstRole.roleid);\n  }\n}\n\n/** 设置学期 */\nfunction setCurrentTermAction(state: UseSetState<State>) {\n  return (termid: number): boolean => {\n    if (state.state.currentTerm && state.state.currentTerm.termid === termid) {\n      return false;\n    }\n    const term = state.state.terms.find((t) => t.termid === termid);\n\n    if (!term) { return false; }\n    state.setState({ currentTerm: term });\n    TermStorage.set(term.termid);\n    return true;\n  };\n}\n\n/** 设置角色 */\nfunction setCurrentRoleAction(state: UseSetState<State>) {\n  return (roleid: number): boolean => {\n    if (!state.state.user) {\n      return false;\n    }\n    if (state.state.currentRole && state.state.currentRole.roleid === roleid) {\n      return false;\n    }\n\n    const roles = state.state.user.aclrole || [];\n    const role = roles.find((r) => r.roleid === roleid);\n    if (!role) { return false; }\n    state.setState({ currentRole: role });\n    RoleStorage.set({\n      roleid: role.roleid,\n      roletype: role.type,\n    });\n    return true;\n  };\n}\n\n/** 登录 */\nfunction loginAction(state: UseSetState<State>) {\n  return async (username: string, password: string): Promise<CommonResponse> => {\n    // 记录登录信息的 token 统一在 services request 方法中做了记录\n    const result = await UserServices.login({\n      username: username.trim(),\n      password: password.trim(),\n    });\n\n    if (result.status && result.data) {\n      setUserToState(result.data, state);\n    }\n\n    return result;\n  }\n}\n\n/** 获取用户信息 */\nfunction getUserInfoAction(state: UseSetState<State>) {\n  // force: 覆盖用户数据\n  return async (force = false): Promise<CommonResponse> => {\n    if (!Token.isLogin()) {\n      return { status: false, message: '用户未登录', data: null };\n    }\n\n    if (!force && state.state.user) {\n      return { status: true, message: '成功', data: state.state.user };\n    }\n\n    // 记录登录信息的 token 统一在 services request 方法中做了记录\n    const result = await UserServices.getUserInfo();\n\n    if (result.status && result.data) {\n      setUserToState(result.data, state);\n    }\n\n    return result;\n  }\n}\n\n/** 登出 */\nfunction logoutAction({ setState }: UseSetState<State>) {\n  return () => {\n    setState({\n      ...initialState,\n    });\n    Token.logout({\n      triggerGlobalCallback: true,\n      reloadPage: true,\n    });\n  }\n}\n\nfunction useAuth(): AuthValue {\n  const state = useSetState<State>(initialState);\n\n  useEffect(() => {\n    setDefaultTerm(state);\n  }, [state.state.terms]);\n\n  useEffect(() => {\n    setDefaultRole(state);\n  }, [state.state.user]);\n\n  return {\n    state: state.state,\n\n    // actions\n    loginAction: loginAction(state),\n    getUserInfoAction: getUserInfoAction(state),\n    logoutAction: logoutAction(state),\n    setCurrentTermAction: setCurrentTermAction(state),\n    setCurrentRoleAction: setCurrentRoleAction(state),\n\n    // getters\n    /** 获取权限 table */\n    authGetter: () => Authority.authStore || [],\n    /** 获取学期数据 */\n    termsGetter: () => state.state.terms || [],\n    /** 是否为老师 */\n    isTeacherGetter: () => state.state.user ? state.state.user.category === USER_TYPE.TEACHER : false,\n    /** 角色列表 */\n    rolesGetter: () => {\n      const info = state.state.user;\n      if (!info) { return []; }\n\n      return info.aclrole || [];\n    },\n  }\n}\n\nexport default createStore(useAuth);\n","module.exports = (__webpack_require__(39))(427);","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAAAmCAYAAACI0bZTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpENkMxM0IyRDczOTUxMUU4ODA0MkZDRUUwNjhGQkM5MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpENkMxM0IyRTczOTUxMUU4ODA0MkZDRUUwNjhGQkM5MyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2QzEzQjJCNzM5NTExRTg4MDQyRkNFRTA2OEZCQzkzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ2QzEzQjJDNzM5NTExRTg4MDQyRkNFRTA2OEZCQzkzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Wu5wuwAABntJREFUeNrcmmlsVFUU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\""],"sourceRoot":""}